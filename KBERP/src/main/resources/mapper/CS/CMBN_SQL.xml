<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cm">

<select id="getGuideCnt" resultType="Integer" parameterType="hashmap">
	SELECT COUNT(*) AS CNT
	FROM CMBN_INFO
	WHERE 1=1
</select>

<select id="getGuide" parameterType="hashmap" resultType="hashmap">
SELECT C.BOARD_NUM, C.CMBN_TITLE, E.EMP_NAME, C.WRITE_DATE,C.CMBN_HITS
FROM(SELECT BOARD_NUM, CMBN_TITLE , EMP_NUM, CMBN_HITS,
         TO_CHAR(WRITE_DATE,'YYYY-MM-DD') AS WRITE_DATE, 
        ROW_NUMBER() OVER(ORDER BY BOARD_NUM DESC) AS RNUM
 FROM CMBN_INFO 
 WHERE 1=1
 )C INNER JOIN EMP E
                ON C.EMP_NUM = E.EMP_NUM
WHERE C.RNUM BETWEEN #{startCount} AND #{endCount}
</select>
</mapper>
