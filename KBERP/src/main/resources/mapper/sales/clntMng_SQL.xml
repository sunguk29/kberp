<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="clntCmpnyMng">

	<select id="getClntCmpntList" parameterType="hashmap" resultType="hashmap">
		SELECT A.RNUM, A.CLNT_CMPNY_NUM, A.GRADE_NAME, A.CLNT_CMPNY_CLSFY_NAME, A.CLNT_CMPNY_NAME, A.ADRS, TRIM(TO_CHAR(RVN, 'L999,999,999,999,999')) AS RVN, A.CNT
		FROM (  SELECT A.RNUM, A.CLNT_CMPNY_NUM, A.GRADE_NAME, A.CLNT_CMPNY_CLSFY_NAME, A.CLNT_CMPNY_NAME, A.ADRS, A.RVN, A.CNT,
		               ROW_NUMBER() OVER(ORDER BY A.RNUM DESC) AS RNUM2 
		        FROM (  SELECT A.RNUM, A.CLNT_CMPNY_NUM, A.GRADE_NAME, A.CLNT_CMPNY_CLSFY_NAME, A.CLNT_CMPNY_NAME, A.ADRS, A.RVN, A.CNT,
		                       A.CLNT_CMPNY_CLSFY_NUM
		                FROM ( SELECT A.CLNT_CMPNY_NUM, A.GRADE_NAME, A.CLNT_CMPNY_CLSFY_NAME, A.CLNT_CMPNY_NAME, A.ADRS, A.RVN, NVL(B.CNT, 0) AS CNT,
		                              A.CLNT_CMPNY_CLSFY_NUM, ROW_NUMBER() OVER(ORDER BY A.RNUM DESC) AS RNUM
		                       FROM ( SELECT ROW_NUMBER() OVER(ORDER BY CC.CLNT_CMPNY_NUM DESC) AS RNUM, CC.CLNT_CMPNY_NUM, CCG.GRADE_NAME, CCC.CLNT_CMPNY_CLSFY_NAME,
		                                     CC.CLNT_CMPNY_NAME, CC.RVN, CC.ADRS || CC.DTL_ADRS AS ADRS, CC.CLNT_CMPNY_CLSFY_NUM
		                              FROM CLNT_CMPNY CC INNER JOIN CLNT_CMPNY_GRADE CCG
		                                                         ON CC.GRADE_NUM = CCG.GRADE_NUM
		                                                 INNER JOIN CLNT_CMPNY_CLSFY CCC
		                                                         ON CC.CLNT_CMPNY_CLSFY_NUM = CCC.CLNT_CMPNY_CLSFY_NUM ) A 
		                                                 LEFT OUTER JOIN ( SELECT CC.CLNT_CMPNY_NAME, COUNT(*) AS CNT
		                                                                   FROM CLNT_CMPNY CC INNER JOIN ENTRPRS_CLNT EC
		                                                                                              ON CC.CLNT_NAME = EC.CLNT_NAME
		                                                                                      INNER JOIN LEAD L
		                                                                                              ON L.CLNT_NUM = EC.CLNT_NUM 
		                                                                                      INNER JOIN SALES S
		                                                                                              ON S.LEAD_NUM = L.LEAD_NUM
		                                                                                      INNER JOIN CNTRCT C
		                                                                                              ON C.SALES_NUM = S.SALES_NUM
		                                                                   GROUP BY CC.CLNT_CMPNY_NAME ) B
		                                                              ON A.CLNT_CMPNY_NAME = B.CLNT_CMPNY_NAME ) A ) A
			   WHERE 1 = 1
				<if test="searchTxt != null and searchTxt != ''">
					<choose>
						<when test="clntCmpnyClsfyNum == 9 and searchType == 0">
							AND A.CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
						</when>
						<when test="clntCmpnyClsfyNum == 9 and searchType == 1">
							AND A.CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
						</when>
						<when test="clntCmpnyClsfyNum == 0 and searchType == 0">
							AND A.CLNT_CMPNY_CLSFY_NUM = 0
							AND A.CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
						</when>
						<when test="clntCmpnyClsfyNum == 1 and searchType == 0">
							AND A.CLNT_CMPNY_CLSFY_NUM = 1
							AND A.CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
						</when>
						<when test="clntCmpnyClsfyNum == 2 and searchType == 0">
							AND A.CLNT_CMPNY_CLSFY_NUM = 2
							AND A.CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
						</when>
						<when test="clntCmpnyClsfyNum == 3 and searchType == 0">
							AND A.CLNT_CMPNY_CLSFY_NUM = 3
							AND A.CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
						</when>
						<when test="clntCmpnyClsfyNum == 4 and searchType == 0">
							AND A.CLNT_CMPNY_CLSFY_NUM = 4
							AND A.CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
						</when>
						<when test="clntCmpnyClsfyNum == 5 and searchType == 0">
							AND A.CLNT_CMPNY_CLSFY_NUM = 5
							AND A.CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
						</when>
						<when test="clntCmpnyClsfyNum == 0 and searchType == 1">
							AND A.CLNT_CMPNY_CLSFY_NUM = 0
							AND A.CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
						</when>
						<when test="clntCmpnyClsfyNum == 1 and searchType == 1">
							AND A.CLNT_CMPNY_CLSFY_NUM = 1
							AND A.CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
						</when>
						<when test="clntCmpnyClsfyNum == 2 and searchType == 1">
							AND A.CLNT_CMPNY_CLSFY_NUM = 2
							AND A.CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
						</when>
						<when test="clntCmpnyClsfyNum == 3 and searchType == 1">
							AND A.CLNT_CMPNY_CLSFY_NUM = 3
							AND A.CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
						</when>
						<when test="clntCmpnyClsfyNum == 4 and searchType == 1">
							AND A.CLNT_CMPNY_CLSFY_NUM = 4
							AND A.CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
						</when>
						<when test="clntCmpnyClsfyNum == 5 and searchType == 1">
							AND A.CLNT_CMPNY_CLSFY_NUM = 5
							AND A.CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
						</when>
					</choose>
				</if> ) A
		WHERE A.RNUM2 BETWEEN #{startCount} AND #{endCount}
	</select>
	
	<select id="clntCmpnyListCnt" parameterType="hashmap" resultType="Integer">
		SELECT COUNT(*) AS CNT
		FROM CLNT_CMPNY
		WHERE 1 = 1
		<if test="searchTxt != null and searchTxt != ''">
			<choose>
				<when test="clntCmpnyClsfyNum == 9 and searchType == 0">
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 9 and searchType == 1">
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 0 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 0
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 1 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 1
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 2 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 2
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 3 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 3
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 4 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 4
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 5 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 5
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 0 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 0
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 1 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 1
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 2 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 2
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 3 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 3
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 4 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 4
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 5 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 5
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
			</choose>
		</if>
	</select>
	
	<insert id="ClntCmpnyAdd" parameterType="hashmap">
		INSERT INTO CLNT_CMPNY (CLNT_CMPNY_NUM, CLNT_CMPNY_CLSFY_NUM, GRADE_NUM, RCGNTN_PATH_NUM, CLNT_CMPNY_NAME, BSNSMN_RGSTRTN_NUM,
							    CLNT_NAME, PHONE_NUM, FAX, HMPG, ZIP_CODE_NUM, ADRS, DTL_ADRS, RVN, EMP_NUM)
		VALUES (CLNT_CMPNY_SEQ.NEXTVAL, #{ccClsfy}, #{ccGrade}, #{rp}, #{ccName}, #{brNum}, #{cName}, #{phoneNum}, #{fax}, #{hmpg},
			    #{zipCodeNum}, #{adrs}, #{dtlAdrs}, #{rvn}, #{sEmpNum})
	</insert>
	
	<select id="clntCmpnyCntrctCnt" parameterType="hashmap" resultType="Integer">
		SELECT COUNT(*) AS CNT
        FROM CLNT_CMPNY
        WHERE 1 = 1
		<if test="searchTxt != null and searchTxt != ''">
			<choose>
				<when test="clntCmpnyClsfyNum == 9 and searchType == 0">
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 9 and searchType == 1">
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 0 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 0
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 1 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 1
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 2 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 2
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 3 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 3
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 4 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 4
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 5 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 5
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 0 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 0
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 1 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 1
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 2 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 2
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 3 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 3
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 4 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 4
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 5 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 5
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
			</choose>
		</if>
		AND CLNT_CMPNY_CLSFY_NUM = 0
	</select>

	<select id="clntCmpnyPartnerCnt" parameterType="hashmap" resultType="Integer">
		SELECT COUNT(*) AS CNT
		FROM CLNT_CMPNY
		WHERE 1 = 1
		<if test="searchTxt != null and searchTxt != ''">
			<choose>
				<when test="clntCmpnyClsfyNum == 9 and searchType == 0">
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 9 and searchType == 1">
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 0 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 0
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 1 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 1
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 2 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 2
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 3 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 3
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 4 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 4
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 5 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 5
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 0 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 0
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 1 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 1
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 2 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 2
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 3 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 3
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 4 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 4
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 5 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 5
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
			</choose>
		</if>
		AND CLNT_CMPNY_CLSFY_NUM = 1
	</select>
	
	<select id="clntCmpnyTmnCnt" parameterType="hashmap" resultType="Integer">
		SELECT COUNT(*) AS CNT
		FROM CLNT_CMPNY
		WHERE 1 = 1
		<if test="searchTxt != null and searchTxt != ''">
			<choose>
				<when test="clntCmpnyClsfyNum == 9 and searchType == 0">
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 9 and searchType == 1">
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 0 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 0
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 1 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 1
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 2 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 2
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 3 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 3
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 4 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 4
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 5 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 5
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 0 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 0
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 1 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 1
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 2 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 2
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 3 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 3
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 4 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 4
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 5 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 5
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
			</choose>
		</if>
		AND CLNT_CMPNY_CLSFY_NUM = 2
	</select>
	
	<select id="clntCmpnySspsCnt" parameterType="hashmap" resultType="Integer">
		SELECT COUNT(*) AS CNT
		FROM CLNT_CMPNY
		WHERE 1 = 1
		<if test="searchTxt != null and searchTxt != ''">
			<choose>
				<when test="clntCmpnyClsfyNum == 9 and searchType == 0">
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 9 and searchType == 1">
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 0 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 0
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 1 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 1
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 2 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 2
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 3 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 3
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 4 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 4
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 5 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 5
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 0 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 0
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 1 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 1
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 2 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 2
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 3 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 3
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 4 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 4
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 5 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 5
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
			</choose>
		</if>
		AND CLNT_CMPNY_CLSFY_NUM = 3
	</select>
	
	<select id="clntCmpnyForeignCnt" parameterType="hashmap" resultType="Integer">
		SELECT COUNT(*) AS CNT
		FROM CLNT_CMPNY
		WHERE 1 = 1
		<if test="searchTxt != null and searchTxt != ''">
			<choose>
				<when test="clntCmpnyClsfyNum == 9 and searchType == 0">
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 9 and searchType == 1">
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 0 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 0
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 1 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 1
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 2 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 2
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 3 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 3
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 4 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 4
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 5 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 5
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 0 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 0
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 1 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 1
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 2 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 2
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 3 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 3
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 4 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 4
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 5 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 5
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
			</choose>
		</if>
		AND CLNT_CMPNY_CLSFY_NUM = 4
	</select>
	
	<select id="clntCmpnyEtcCnt" parameterType="hashmap" resultType="Integer">
		SELECT COUNT(*) AS CNT
		FROM CLNT_CMPNY
		WHERE 1 = 1
		<if test="searchTxt != null and searchTxt != ''">
			<choose>
				<when test="clntCmpnyClsfyNum == 9 and searchType == 0">
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 9 and searchType == 1">
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 0 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 0
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 1 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 1
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 2 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 2
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 3 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 3
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 4 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 4
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 5 and searchType == 0">
					AND CLNT_CMPNY_CLSFY_NUM = 5
					AND CLNT_CMPNY_NAME LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 0 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 0
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 1 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 1
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 2 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 2
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 3 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 3
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 4 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 4
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
				<when test="clntCmpnyClsfyNum == 5 and searchType == 1">
					AND CLNT_CMPNY_CLSFY_NUM = 5
					AND CLNT_CMPNY_NUM LIKE '%' || #{searchTxt} || '%'
				</when>
			</choose>
		</if>
		AND CLNT_CMPNY_CLSFY_NUM = 5
	</select>
	
	<insert id="ClntCmpnyAttFile" parameterType="hashmap">
		INSERT INTO CLNT_CMPNY_ATT_FILE (ATT_FILE_NUM, CLNT_CMPNY_NUM, ATT_FILE_NAME)
		VALUES (CLNT_CMPNY_ATT_FILE_SEQ.NEXTVAL, CLNT_CMPNY_SEQ.CURRVAL, #{attFile})
	</insert>
	
	<insert id="opContAdd" parameterType="hashmap">
		INSERT INTO CLNT_CMPNY_CMNT(CMNT_NUM, CLNT_CMPNY_NUM, EMP_NUM, CONT)
		VALUES(CLNT_CMPNY_CMNT_SEQ.NEXTVAL, #{ccn}, #{sEmpNum}, #{tacont})
	</insert>
	
	<insert id="clntAttAdd" parameterType="hashmap">
		INSERT INTO CLNT_ATT_FILE (ATT_FILE_NUM, CLNT_NUM, ATT_FILE_NAME)
		VALUES (CLNT_ATT_FILE_SEQ.NEXTVAL, ENTRPRS_CLNT_SEQ.CURRVAL, #{attFile})
	</insert>
	
	<select id="getClntList" parameterType="hashmap" resultType="hashmap">
		SELECT EC.CLNT_NUM, EC.DEPT, EC.DUTY, EC.EMAIL, EC.CLNT_CMPNY_NAME, EC.CLNT_NAME, EC.MBL, EC.RNUM
		FROM (  SELECT EC.CLNT_NUM, EC.DEPT, EC.DUTY, EC.EMAIL, EC.CLNT_CMPNY_NAME, EC.CLNT_NAME, EC.MBL, EC.RNUM,
		               ROW_NUMBER() OVER(ORDER BY EC.RNUM DESC) AS RNUM2 
		        FROM (  SELECT EC.CLNT_NUM, EC.DEPT, EC.DUTY, EC.EMAIL, EC.CLNT_CMPNY_NAME, EC.CLNT_NAME, EC.MBL, EC.RNUM
		                FROM (  SELECT EC.CLNT_NUM, EC.DEPT, EC.DUTY, EC.EMAIL, EC.CLNT_CMPNY_NAME, EC.CLNT_NAME,
		                               EC.MBL, ROW_NUMBER() OVER(ORDER BY EC.RNUM DESC) AS RNUM
		                        FROM (  SELECT EC.CLNT_NUM, EC.DEPT, EC.DUTY, EC.EMAIL, CC.CLNT_CMPNY_NAME, EC.CLNT_NAME,
		                                       EC.MBL, ROW_NUMBER() OVER(ORDER BY EC.CLNT_NUM DESC) AS RNUM
		                                FROM ENTRPRS_CLNT EC INNER JOIN CLNT_CMPNY CC
		                                                             ON EC.CLNT_CMPNY_NUM = CC.CLNT_CMPNY_NUM ) EC ) EC ) EC ) EC
		WHERE EC.RNUM2 BETWEEN #{startCount} AND #{endCount}
	</select>
	
	<select id="clntListCnt" parameterType="hashmap" resultType="Integer">
		SELECT COUNT(*) AS CNT
		FROM ENTRPRS_CLNT
	</select>
	
	<select id="clntCmpnyCont" parameterType="hashmap" resultType="hashmap">
		SELECT CLNT_CMPNY_NAME, CLNT_CMPNY_CLSFY_NUM, GRADE_NUM, BSNSMN_RGSTRTN_NUM, CLNT_NAME,
		       PHONE_NUM, FAX, HMPG, ZIP_CODE_NUM, ADRS, DTL_ADRS, TRIM(TO_CHAR(RVN, 'L999,999,999,999,999')) AS RVN, RCGNTN_PATH_NUM
		FROM CLNT_CMPNY
		WHERE CLNT_CMPNY_NUM = #{ccn}
	</select>

	<delete id="ccDelete" parameterType="hashmap">
		DELETE FROM CLNT_CMPNY
		WHERE CLNT_CMPNY_NUM = #{ccn}
	</delete>
	
	<delete id="ccAttDelete" parameterType="hashmap">
		DELETE FROM CLNT_CMPNY_ATT_FILE
		WHERE CLNT_CMPNY_NUM = #{ccn}
	</delete>
	
	<select id="clntAdd" parameterType="hashmap" resultType="hashmap">
		INSERT INTO ENTRPRS_CLNT (CLNT_NUM, CLNT_NAME, CLNT_CMPNY_NUM, MNGR_EMP_NUM, RGSTRTN_EMP_NUM, DEPT, DUTY, MBL, EMAIL)
		VALUES (ENTRPRS_CLNT_SEQ.NEXTVAL, #{cName}, #{ccNum}, #{mngNum}, #{sEmpNum}, #{dept}, #{duty}, #{mbl}, #{email})
	</select>
	
	<select id="popupCcListCnt" parameterType="hashmap" resultType="Integer">
		SELECT COUNT(*) AS CNT
		FROM CLNT_CMPNY
	</select>
	
	<select id="popupMngListCnt" parameterType="hashmap" resultType="Integer">
		SELECT COUNT(*) AS CNT
		FROM EMP E INNER JOIN APNTM A
		                           ON E.EMP_NUM = A.EMP_NUM
		                   INNER JOIN DEPT D
		                           ON A.DEPT_NUM = D.DEPT_NUM
		                   INNER JOIN RANK R
		                           ON A.RANK_NUM = R.RANK_NUM
		WHERE D.DEPT_NAME LIKE '영%'
	</select>
	
	<select id="popupCcList" parameterType="hashmap" resultType="hashmap">
		SELECT CC.CLNT_CMPNY_NAME, CC.CLNT_CMPNY_CLSFY_NUM, CC.GRADE_NUM, CC.ADRS, TO_CHAR(CC.RGSTRTN_DATE, 'YYYY-MM-DD') AS RGSTRTN_DATE,
			   CC.CLNT_CMPNY_NUM
		FROM (  SELECT CLNT_CMPNY_NAME, CLNT_CMPNY_CLSFY_NUM, GRADE_NUM, ADRS, RGSTRTN_DATE, CLNT_CMPNY_NUM,
		               ROW_NUMBER() OVER(ORDER BY CLNT_CMPNY_NUM DESC) AS RNUM    
		        FROM CLNT_CMPNY ) CC
		WHERE CC.RNUM BETWEEN #{startCount} AND #{endCount}
	</select>
	
	<select id="popupMngList" parameterType="hashmap" resultType="hashmap">
		SELECT ME.EMP_NUM, ME.EMP_NAME, ME.RANK_NAME, ME.DEPT_NAME
		FROM ( SELECT E.EMP_NUM, E.EMP_NAME, R.RANK_NAME, D.DEPT_NUM, D.DEPT_NAME, ROW_NUMBER() OVER(ORDER BY E.EMP_NUM ASC) AS RNUM
		        FROM EMP E INNER JOIN APNTM A
		                           ON E.EMP_NUM = A.EMP_NUM
		                   INNER JOIN DEPT D
		                           ON A.DEPT_NUM = D.DEPT_NUM
		                   INNER JOIN RANK R
		                           ON A.RANK_NUM = R.RANK_NUM
		        WHERE D.DEPT_NAME LIKE '영%'
		    ) ME
		WHERE ME.RNUM BETWEEN #{startCount} AND #{endCount}
	</select>
	
	<select id="getOpList" parameterType="hashmap" resultType="hashmap">
		SELECT E.EMP_NAME, D.DEPT_NAME, R.RANK_NAME, CCC.CONT, TO_CHAR(CCC.RGSTRTN_DATE, 'YYYY-MM-DD AMFM HH:MI') AS RGSTRTN_DATE,
			   CCC.CMNT_NUM
		FROM CLNT_CMPNY_CMNT CCC INNER JOIN CLNT_CMPNY CC
		                             ON CCC.CLNT_CMPNY_NUM = CC.CLNT_CMPNY_NUM  
		                         INNER JOIN EMP E
		                                 ON CCC.EMP_NUM = E.EMP_NUM
		                         INNER JOIN APNTM A
		                                 ON E.EMP_NUM = A.EMP_NUM
		                         INNER JOIN DEPT D
		                                 ON A.DEPT_NUM = D.DEPT_NUM
		                         INNER JOIN RANK R
		                                 ON A.RANK_NUM = R.RANK_NUM
		WHERE CCC.DEL_CHECK IS NULL
		ORDER BY CCC.CMNT_NUM DESC
	</select>
	
	<select id="getClList" parameterType="hashmap" resultType="hashmap">
		SELECT EC.CLNT_NAME, EC.DUTY, EC.DEPT, EC.MBL, EC.EMAIL
		FROM CLNT_CMPNY CC INNER JOIN ENTRPRS_CLNT EC
		                           ON CC.CLNT_CMPNY_NUM = EC.CLNT_CMPNY_NUM
		WHERE CC.CLNT_CMPNY_NUM = #{ccn}
	</select>
	
	<update id="opContUpdate" parameterType="hashmap">
		UPDATE CLNT_CMPNY_CMNT SET DEL_CHECK = SYSDATE
		WHERE CMNT_NUM = #{cmNum}
	</update>
	
</mapper>